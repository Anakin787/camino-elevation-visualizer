<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camino de Santiago: ê³ ë„ ê·¸ë˜í”„</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 24px;
        }
        .chart-container {
            position: relative;
            height: 500px;
            margin-top: 20px;
        }
        .info-box {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #E67E22;
        }
        .info-box h3 {
            margin-top: 0;
            color: #D35400;
        }
        .route-point {
            display: inline-block;
            margin: 5px 10px;
            padding: 8px 15px;
            background: #E67E22;
            color: white;
            border-radius: 20px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”ï¸ Camino de Santiago: SJPDP to Roncesvalles</h1>
        <div class="chart-container">
            <canvas id="elevationChart"></canvas>
        </div>
        <div class="info-box">
            <h3>ğŸ“ ìˆœë¡€ ê²½ë¡œ ì§€ì </h3>
            <div>
                <span class="route-point">Saint-Jean-Pied-de-Port (0km, 170m)</span>
                <span class="route-point">Honto (5.0km, 450m)</span>
                <span class="route-point">Orisson (7.6km, 800m)</span>
                <span class="route-point">Collado de Bentartea (16.2km, 1337m)</span>
                <span class="route-point">Collado de Lepoeder (20.2km, 1430m)</span>
                <span class="route-point">Roncesvalles (24.2km, 950m)</span>
            </div>
        </div>
    </div>

    <script>
        // ë°ì´í„° ì„¤ì •
        const data = [
            { distance: 0, elevation: 170, label: "Saint-Jean-Pied-de-Port", segment: 0 },
            { distance: 5.0, elevation: 450, label: "Honto", segment: 5.0 },
            { distance: 7.6, elevation: 800, label: "Orisson", segment: 2.6 },
            { distance: 16.2, elevation: 1337, label: "Collado de Bentartea", segment: 8.6 },
            { distance: 20.2, elevation: 1430, label: "Collado de Lepoeder", segment: 4.0 },
            { distance: 24.2, elevation: 950, label: "Roncesvalles", segment: 4.0 }
        ];

        // ë¶€ë“œëŸ¬ìš´ ê³¡ì„ ì„ ìœ„í•œ ë³´ê°„ ë°ì´í„° ìƒì„±
        function interpolateData(data, steps = 300) {
            const interpolated = [];
            for (let i = 0; i < data.length - 1; i++) {
                const start = data[i];
                const end = data[i + 1];
                const segmentSteps = Math.floor(steps / (data.length - 1));
                
                for (let j = 0; j <= segmentSteps; j++) {
                    const t = j / segmentSteps;
                    const distance = start.distance + (end.distance - start.distance) * t;
                    const elevation = start.elevation + (end.elevation - start.elevation) * t;
                    interpolated.push({ distance, elevation });
                }
            }
            return interpolated;
        }

        const smoothData = interpolateData(data, 300);
        const distances = smoothData.map(d => d.distance);
        const elevations = smoothData.map(d => d.elevation);

        // Chart.js ì„¤ì •
        const ctx = document.getElementById('elevationChart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: distances.map(d => d.toFixed(1)),
                datasets: [{
                    label: 'ê³ ë„ (m)',
                    data: elevations,
                    borderColor: '#D35400',
                    backgroundColor: 'rgba(230, 126, 34, 0.3)',
                    borderWidth: 2.5,
                    fill: true,
                    tension: 0.4,
                    pointRadius: 0,
                    pointHoverRadius: 0
                }, {
                    label: 'ì§€ì ',
                    data: data.map(d => ({ x: d.distance, y: d.elevation })),
                    backgroundColor: '#C0392B',
                    borderColor: '#C0392B',
                    pointRadius: 6,
                    pointHoverRadius: 8,
                    showLine: false,
                    parsing: {
                        xAxisKey: 'x',
                        yAxisKey: 'y'
                    }
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        callbacks: {
                            title: function(context) {
                                const index = context[0].dataIndex;
                                if (context[0].datasetIndex === 1) {
                                    const point = data.find(d => 
                                        Math.abs(d.distance - context[0].parsed.x) < 0.1
                                    );
                                    return point ? point.label : '';
                                }
                                return `ê±°ë¦¬: ${context[0].parsed.x.toFixed(1)}km`;
                            },
                            label: function(context) {
                                return `ê³ ë„: ${context.parsed.y.toFixed(0)}m`;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'ê±°ë¦¬ (km)',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        min: -1,
                        max: 26
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'ê³ ë„ (m)',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        min: 100,
                        max: 1600
                    }
                },
                interaction: {
                    mode: 'index',
                    intersect: false
                }
            }
        });

        // ì§€ì ì— ë¼ë²¨ ì¶”ê°€
        data.forEach((point, index) => {
            if (index > 0) {
                const midX = (data[index - 1].distance + point.distance) / 2;
                const midY = 150;
                const annotation = {
                    type: 'label',
                    xValue: midX,
                    yValue: midY,
                    content: [`${point.segment}km`],
                    font: {
                        size: 11,
                        style: 'italic'
                    },
                    color: '#7F8C8D'
                };
            }
        });
    </script>
</body>
</html>
